string(TOLOWER "${CMAKE_BUILD_TYPE}" PERFTEST_BUILD_TYPE)

if(HPX_WITH_HIP OR HPX_WITH_CUDA)
  if(TARGET Cuda::cuda)
    set(PYUTILS_COMPILER
        "${CMAKE_CUDA_COMPILER} ${CMAKE_CUDA_COMPILER_VERSION} (${CMAKE_CXX_COMPILER} ${CMAKE_CXX_COMPILER_VERSION})"
    )
  else()
    set(PYUTILS_COMPILER
        "${CMAKE_CXX_COMPILER} ${CMAKE_CXX_COMPILER_VERSION} (${CMAKE_CUDA_COMPILER} ${CMAKE_CUDA_COMPILER_VERSION})"
    )
  endif()
else()
  set(PYUTILS_COMPILER "${CMAKE_CXX_COMPILER} ${CMAKE_CXX_COMPILER_VERSION}")
endif()

file(
  COPY .
  DESTINATION .
  FILES_MATCHING
  PATTERN *.py
)
configure_file(pyutils/buildinfo.py.in pyutils/buildinfo.py)
